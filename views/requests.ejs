<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Blood Requests - RaktSetu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
        :root {
            --primary: #e11d48;
            --primary-light: #fecdd3;
            --secondary: #1e40af;
            --success: #059669;
            --warning: #d97706;
            --danger: #dc2626;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            @apply bg-gray-50 text-gray-900;
        }

        /* Status Badges */
        .status-badge {
            @apply px-2.5 py-1 rounded-full text-xs font-medium;
        }
        
        .status-pending { @apply bg-yellow-50 text-yellow-800; }
        .status-completed { @apply bg-green-50 text-green-800; }
        .status-rejected { @apply bg-red-50 text-red-800; }
        .status-inprogress { @apply bg-blue-50 text-blue-800; }

        /* Card Styles */
        .card {
            @apply bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden transition-all duration-200 hover:shadow-md;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--gray-100);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--gray-300);
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--gray-400);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }

        /* Custom Checkbox */
        .custom-checkbox {
            @apply h-4 w-4 rounded border-gray-300 text-red-600 focus:ring-red-500;
        }

        /* Custom Select */
        .custom-select {
            @apply block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 sm:text-sm rounded-md;
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <!-- Logo -->
                    <a href="/patient?patientId=<%= user._id %>" class="flex-shrink-0 flex items-center">
                        <i class="fas fa-tint text-red-600 text-2xl mr-2"></i>
                        <span class="text-xl font-bold bg-gradient-to-r from-red-600 to-red-400 bg-clip-text text-transparent">RaktSetu</span>
                    </a>
                    
                    <!-- Desktop Navigation -->
                    <div class="hidden md:ml-10 md:flex md:space-x-8">
                        <a href="/patient?patientId=<%= user._id %>" class="text-gray-500 hover:text-gray-700 px-1 pt-1 text-sm font-medium flex items-center">
                            <i class="fas fa-home mr-1.5"></i>
                            Dashboard
                        </a>
                        <a href="/requests" class="border-red-500 text-gray-900 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                            <i class="fas fa-bell mr-1.5"></i>
                            My Requests
                        </a>
                    </div>
                </div>
                
                <!-- User Menu -->
                <div class="hidden md:ml-4 md:flex-shrink-0 md:flex md:items-center">
                    <div class="relative ml-3" x-data="{ open: false }">
                        <button @click="open = !open" class="flex items-center max-w-xs rounded-full focus:outline-none" id="user-menu">
                            <img class="h-8 w-8 rounded-full" 
                                 src="https://ui-avatars.com/api/?name=<%= user.fullName %>&background=ef4444&color=fff" 
                                 alt="<%= user.fullName %>'s profile">
                            <div class="ml-2 text-left">
                                <p class="text-sm font-medium text-gray-700"><%= user.fullName %></p>
                                <p class="text-xs text-gray-500">Patient</p>
                            </div>
                            <i class="fas fa-chevron-down ml-1.5 text-gray-400 text-xs"></i>
                        </button>
                        
                        <!-- Dropdown menu -->
                        <div x-show="open" 
                             @click.away="open = false" 
                             x-transition:enter="transition ease-out duration-100"
                             x-transition:enter-start="transform opacity-0 scale-95"
                             x-transition:enter-end="transform opacity-100 scale-100"
                             x-transition:leave="transition ease-in duration-75"
                             x-transition:leave-start="transform opacity-100 scale-100"
                             x-transition:leave-end="transform opacity-0 scale-95"
                             class="origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10" 
                             role="menu" 
                             aria-orientation="vertical" 
                             aria-labelledby="user-menu">
                            <div class="py-1" role="none">
                                <a href="#" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" role="menuitem">
                                    <i class="fas fa-user-circle mr-2 text-gray-400"></i>
                                    Your Profile
                                </a>
                                <a href="#" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" role="menuitem">
                                    <i class="fas fa-cog mr-2 text-gray-400"></i>
                                    Settings
                                </a>
                                <div class="border-t border-gray-100 my-1"></div>
                                <a href="/get-started" class="flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50" role="menuitem">
                                    <i class="fas fa-sign-out-alt mr-2"></i>
                                    Sign out
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Mobile menu button -->
                <div class="-mr-2 flex items-center md:hidden">
                    <button type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-red-500">
                        <span class="sr-only">Open main menu</span>
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile menu -->
        <div class="md:hidden hidden" id="mobile-menu">
            <div class="pt-2 pb-3 space-y-1">
                <a href="/patient" class="bg-red-50 border-red-500 text-red-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium">
                    Dashboard
                </a>
                <a href="/requests" class="border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800 block pl-3 pr-4 py-2 border-l-4 text-base font-medium">
                    My Requests
                </a>
            </div>
            <div class="pt-4 pb-3 border-t border-gray-200">
                <div class="flex items-center px-4">
                    <div class="flex-shrink-0">
                        <img class="h-10 w-10 rounded-full" 
                             src="https://ui-avatars.com/api/?name=<%= user.fullName %>&background=ef4444&color=fff" 
                             alt="<%= user.fullName %>">
                    </div>
                    <div class="ml-3">
                        <div class="text-base font-medium text-gray-800"><%= user.fullName %></div>
                        <div class="text-sm font-medium text-gray-500">Patient</div>
                    </div>
                </div>
                <div class="mt-3 space-y-1">
                    <a href="#" class="block px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100">
                        Your Profile
                    </a>
                    <a href="#" class="block px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100">
                        Settings
                    </a>
                    <a href="/get-started" class="block px-4 py-2 text-base font-medium text-red-600 hover:bg-red-50">
                        Sign out
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <!-- Page Header -->
        <div class="md:flex md:items-center md:justify-between mb-8">
            <div class="flex-1 min-w-0">
                <h1 class="text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate">
                    <i class="fas fa-bell text-red-500 mr-3"></i>
                    My Blood Requests
                </h1>
                <p class="mt-1 text-sm text-gray-500">Track and manage all your blood donation requests in one place.</p>
            </div>
            <div class="mt-4 flex md:mt-0 md:ml-4">
                <a href="/patient" class="inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                    <i class="fas fa-plus mr-2"></i> New Request
                </a>
            </div>
        </div>

        <!-- Stats Cards - Enhanced -->
        <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4 mb-10">
            <!-- Total Requests Card -->
            <div class="relative group">
                <div class="absolute -inset-0.5 bg-gradient-to-r from-red-400 to-pink-600 rounded-2xl opacity-0 group-hover:opacity-100 blur transition duration-300"></div>
                <div class="relative bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-lg transition-all duration-300 h-full">
                    <div class="flex items-center justify-between">
                        <div class="p-3 rounded-xl bg-red-50 text-red-500">
                            <i class="fas fa-file-medical text-2xl"></i>
                        </div>
                        <div class="text-right">
                            <p class="text-sm font-medium text-gray-500">Total Requests</p>
                            <h3 class="mt-1 text-3xl font-bold text-gray-900"><%= requests.length %></h3>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pending Requests Card -->
            <div class="relative group">
                <div class="absolute -inset-0.5 bg-gradient-to-r from-yellow-400 to-amber-600 rounded-2xl opacity-0 group-hover:opacity-100 blur transition duration-300"></div>
                <div class="relative bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-lg transition-all duration-300 h-full">
                    <div class="flex items-center justify-between">
                        <div class="p-3 rounded-xl bg-amber-50 text-amber-500">
                            <i class="fas fa-clock text-2xl"></i>
                        </div>
                        <div class="text-right">
                            <p class="text-sm font-medium text-gray-500">Pending</p>
                            <h3 class="mt-1 text-3xl font-bold text-gray-900">
                                <%= requests.filter(r => r.status === 'pending').length %>
                            </h3>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Completed Requests Card -->
            <div class="relative group">
                <div class="absolute -inset-0.5 bg-gradient-to-r from-green-400 to-emerald-600 rounded-2xl opacity-0 group-hover:opacity-100 blur transition duration-300"></div>
                <div class="relative bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-lg transition-all duration-300 h-full">
                    <div class="flex items-center justify-between">
                        <div class="p-3 rounded-xl bg-green-50 text-green-500">
                            <i class="fas fa-check-circle text-2xl"></i>
                        </div>
                        <div class="text-right">
                            <p class="text-sm font-medium text-gray-500">Completed</p>
                            <h3 class="mt-1 text-3xl font-bold text-gray-900">
                                <%= requests.filter(r => r.status === 'completed').length %>
                            </h3>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Blood Type Card -->
            <div class="relative group">
                <div class="absolute -inset-0.5 bg-gradient-to-r from-blue-400 to-indigo-600 rounded-2xl opacity-0 group-hover:opacity-100 blur transition duration-300"></div>
                <div class="relative bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-lg transition-all duration-300 h-full">
                    <div class="flex items-center justify-between">
                        <div class="p-3 rounded-xl bg-blue-50 text-blue-500">
                            <i class="fas fa-tint text-2xl"></i>
                        </div>
                        <div class="text-right">
                            <p class="text-sm font-medium text-gray-500">Your Blood Type</p>
                            <h3 class="mt-1 text-3xl font-bold text-gray-900">
                                <%= user.bloodGroup || 'Not set' %>
                            </h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Requests Table -->
        <div class="card overflow-hidden">
            <!-- Table Header -->
            <div class="px-6 py-5 border-b border-gray-200">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
                    <div class="flex-1 mb-4 sm:mb-0">
                        <h3 class="text-lg font-medium text-gray-900">Recent Requests</h3>
                        <p class="mt-1 text-sm text-gray-500">Your most recent blood donation requests</p>
                    </div>
                    <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3">
                        <div class="relative rounded-md shadow-sm w-full sm:w-48">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-filter text-gray-400"></i>
                            </div>
                            <select class="custom-select pl-10 w-full">
                                <option>All Status</option>
                                <option>Pending</option>
                                <option>In Progress</option>
                                <option>Completed</option>
                                <option>Rejected</option>
                            </select>
                        </div>
                        <div class="relative rounded-md shadow-sm w-full sm:w-64">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-search text-gray-400"></i>
                            </div>
                            <input type="text" 
                                   class="focus:ring-red-500 focus:border-red-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md" 
                                   placeholder="Search requests...">
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Desktop Table -->
            <div class="hidden sm:block">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Request Details</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Requested To</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        <% if (requests.length === 0) { %>
                            <tr>
                                <td colspan="4" class="px-6 py-12 text-center text-gray-500">
                                    <i class="fas fa-inbox text-4xl text-gray-300 mb-3"></i>
                                    <p class="text-sm">No requests found. Create your first request to get started.</p>
                                </td>
                            </tr>
                        <% } %>

                        <% requests.forEach((req, index) => { %>
                            <tr class="hover:bg-gray-50 transition-colors duration-150">
                                <!-- Request Details -->
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="flex-shrink-0 h-10 w-10 rounded-full bg-red-100 flex items-center justify-center">
                                            <i class="fas fa-tint text-red-600"></i>
                                        </div>
                                        <div class="ml-4">
                                            <div class="text-sm font-medium text-gray-900">
                                                #REQ-<%= index + 1 %>
                                            </div>
                                            <div class="text-sm text-gray-500">
                                                <%= new Date(req.datetime).toLocaleDateString('en-US', { 
                                                    year: 'numeric', 
                                                    month: 'short', 
                                                    day: 'numeric',
                                                    hour: '2-digit',
                                                    minute: '2-digit'
                                                }) %>
                                            </div>
                                        </div>
                                    </div>
                                </td>

                                <!-- Requested To -->
                                <td class="px-6 py-4">
                                    <div class="flex items-center">
                                        <div class="flex-shrink-0 h-10 w-10 rounded-full bg-blue-50 flex items-center justify-center">
                                            <i class="fas fa-<%= req.donorId ? 'user' : 'hospital' %> text-blue-600"></i>
                                        </div>
                                        <div class="ml-4">
                                            <div class="text-sm font-medium text-gray-900">
                                                <%= req.donorName || req.hospitalName || 'Not specified' %>
                                            </div>
                                            <div class="text-sm text-gray-500">
                                                <%= req.donorId ? 'Donor' : 'Hospital' %> • 
                                                <span class="font-medium"><%= req.bloodGroup %></span> • 
                                                <%= req.units %> unit<%= req.units > 1 ? 's' : '' %>
                                            </div>
                                        </div>
                                    </div>
                                </td>

                                <!-- Status -->
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="status-badge status-<%= req.status %>">
                                        <i class="fas fa-<%= 
                                            req.status === 'pending' ? 'clock' : 
                                            req.status === 'completed' ? 'check-circle' : 
                                            req.status === 'rejected' ? 'times-circle' : 'sync-alt' 
                                        %> mr-1"></i>
                                        <%= req.status.charAt(0).toUpperCase() + req.status.slice(1) %>
                                    </span>
                                </td>

                                <!-- Actions -->
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                    <div class="flex justify-end space-x-3">
                                        <button onclick="viewRequest('<%= req._id %>')" class="text-blue-600 hover:text-blue-900 transition-colors duration-200 p-1 rounded-full hover:bg-blue-50">
                                            <i class="far fa-eye"></i>
                                            <span class="sr-only">View</span>
                                        </button>
                                        <% if (req.status === 'pending') { %>
                                            <button onclick="cancelRequest('<%= req._id %>')" class="text-red-600 hover:text-red-900 transition-colors duration-200 p-1 rounded-full hover:bg-red-50">
                                                <i class="far fa-times-circle"></i>
                                                <span class="sr-only">Cancel</span>
                                            </button>
                                        <% } %>
                                        <div class="relative inline-block text-left" x-data="{ open: false }">
                                            <div>
                                                <button @click="open = !open" type="button" class="text-gray-400 hover:text-gray-600 transition-colors duration-200 p-1 rounded-full hover:bg-gray-100" id="options-menu-<%= index %>">
                                                    <i class="far fa-ellipsis-v"></i>
                                                    <span class="sr-only">More options</span>
                                                </button>
                                            </div>
                                            <div x-show="open" @click.away="open = false" class="origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10" style="display: none;">
                                                <div class="py-1" role="menu" aria-orientation="vertical">
                                                    <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" role="menuitem">
                                                        <i class="far fa-copy mr-2"></i> Copy Request ID
                                                    </a>
                                                    <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" role="menuitem">
                                                        <i class="far fa-flag mr-2"></i> Report Issue
                                                    </a>
                                                    <% if (req.status === 'completed') { %>
                                                    <a href="#" class="block px-4 py-2 text-sm text-green-600 hover:bg-gray-100" role="menuitem">
                                                        <i class="far fa-star mr-2"></i> Rate Donor
                                                    </a>
                                                    <% } %>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        <% }); %>
                    </tbody>
                </table>
            </div>

            <!-- Mobile Cards -->
            <div class="sm:hidden">
                <% if (requests.length === 0) { %>
                    <div class="px-4 py-12 text-center">
                        <i class="fas fa-inbox text-4xl text-gray-300 mb-3"></i>
                        <p class="text-sm text-gray-500">No requests found. Create your first request to get started.</p>
                    </div>
                <% } else { %>
                    <div class="divide-y divide-gray-200">
                        <% requests.forEach((req, index) => { %>
                            <div class="p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center">
                                        <div class="flex-shrink-0 h-10 w-10 rounded-full bg-red-100 flex items-center justify-center">
                                            <i class="fas fa-tint text-red-600"></i>
                                        </div>
                                        <div class="ml-3">
                                            <p class="text-sm font-medium text-gray-900">
                                                #REQ-<%= index + 1 %>
                                            </p>
                                            <p class="text-xs text-gray-500">
                                                <%= new Date(req.datetime).toLocaleDateString() %>
                                            </p>
                                        </div>
                                    </div>
                                    <span class="status-badge status-<%= req.status %>">
                                        <%= req.status.charAt(0).toUpperCase() + req.status.slice(1) %>
                                    </span>
                                </div>
                                
                                <div class="ml-13 -mt-2">
                                    <p class="text-sm text-gray-900">
                                        <i class="fas fa-<%= req.donorId ? 'user' : 'hospital' %> text-gray-400 mr-2"></i>
                                        <%= req.donorName || req.hospitalName || 'Not specified' %>
                                    </p>
                                    <div class="mt-2 flex items-center text-sm text-gray-500">
                                        <span class="mr-4">
                                            <i class="fas fa-tint text-red-400 mr-1"></i>
                                            <%= req.bloodGroup %>
                                        </span>
                                        <span>
                                            <i class="fas fa-syringe text-gray-400 mr-1"></i>
                                            <%= req.units %> unit<%= req.units > 1 ? 's' : '' %>
                                        </span>
                                    </div>
                                    
                                    <div class="mt-3 flex justify-between items-center">
                                        <div class="flex space-x-3">
                                            <button class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                                                <i class="far fa-eye mr-1"></i> View
                                            </button>
                                            <% if (req.status === 'pending') { %>
                                                <button class="text-red-600 hover:text-red-800 text-sm font-medium">
                                                    <i class="far fa-times-circle mr-1"></i> Cancel
                                                </button>
                                            <% } %>
                                        </div>
                                        <button class="text-gray-400 hover:text-gray-600">
                                            <i class="far fa-ellipsis-v"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        <% }); %>
                    </div>
                <% } %>
            </div>

            <!-- Pagination -->
            <div class="bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6">
                <div class="flex-1 flex justify-between sm:hidden">
                    <a href="#" class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                        Previous
                    </a>
                    <a href="#" class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                        Next
                    </a>
                </div>
                <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                    <div>
                        <p class="text-sm text-gray-700">
                            Showing <span class="font-medium">1</span> to <span class="font-medium">4</span> of <span class="font-medium">12</span> results
                        </p>
                    </div>
                    <div>
                        <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                            <a href="#" class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                <span class="sr-only">Previous</span>
                                <i class="fas fa-chevron-left h-5 w-5"></i>
                            </a>
                            <a href="#" aria-current="page" class="z-10 bg-red-50 border-red-500 text-red-600 relative inline-flex items-center px-4 py-2 border text-sm font-medium">
                                1
                            </a>
                            <a href="#" class="bg-white border-gray-300 text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-4 py-2 border text-sm font-medium">
                                2
                            </a>
                            <a href="#" class="bg-white border-gray-300 text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-4 py-2 border text-sm font-medium">
                                3
                            </a>
                            <span class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700">
                                ...
                            </span>
                            <a href="#" class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                <span class="sr-only">Next</span>
                                <i class="fas fa-chevron-right h-5 w-5"></i>
                            </a>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 mt-12">
        <div class="max-w-7xl mx-auto py-6 px-4 overflow-hidden sm:px-6 lg:px-8">
            <p class="text-center text-base text-gray-500">
                &copy; 2023 RaktSetu. All rights reserved.
            </p>
        </div>
    </footer>

    <!-- Alpine.js for dropdown functionality -->
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    
    <!-- SweetAlert2 for beautiful alerts -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <script>
        // View request details
        function viewRequest(requestId) {
            // For demo, show a simple alert. In a real app, you'd fetch and show more details
            Swal.fire({
                title: 'Request Details',
                html: `
                    <div class="text-left">
                        <p class="mb-2"><strong>Request ID:</strong> ${requestId}</p>
                        <p class="mb-2"><strong>Status:</strong> <span class="px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800">Pending</span></p>
                        <p class="mb-2"><strong>Requested On:</strong> ${new Date().toLocaleDateString()}</p>
                        <p class="mb-2"><strong>Blood Group:</strong> O+</p>
                        <p class="mb-2"><strong>Units Required:</strong> 1</p>
                        <p class="mb-2"><strong>Hospital:</strong> City General Hospital</p>
                        <p class="mb-2"><strong>Donor Assigned:</strong> John Doe (O+)</p>
                        <p class="mb-2"><strong>Contact:</strong> +1 234 567 8900</p>
                    </div>
                `,
                showCancelButton: true,
                confirmButtonText: 'Close',
                cancelButtonText: 'View Full Details',
                showCloseButton: true,
                confirmButtonColor: '#3b82f6',
                cancelButtonColor: '#6b7280'
            }).then((result) => {
                if (result.dismiss === Swal.DismissReason.cancel) {
                    // In a real app, this would navigate to a detailed view
                    window.location.href = `/requests/${requestId}`;
                }
            });
        }

        // Cancel a pending request
        function cancelRequest(requestId) {
            Swal.fire({
                title: 'Cancel Request',
                text: 'Are you sure you want to cancel this request? This action cannot be undone.',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#ef4444',
                cancelButtonColor: '#6b7280',
                confirmButtonText: 'Yes, cancel it!',
                cancelButtonText: 'No, keep it',
                reverseButtons: true
            }).then((result) => {
                if (result.isConfirmed) {
                    // In a real app, this would make an API call to cancel the request
                    fetch(`/api/requests/${requestId}/cancel`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            Swal.fire(
                                'Cancelled!',
                                'Your request has been cancelled.',
                                'success'
                            ).then(() => {
                                // Reload the page to reflect changes
                                window.location.reload();
                            });
                        } else {
                            throw new Error(data.message || 'Failed to cancel request');
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        Swal.fire(
                            'Error',
                            'There was an error cancelling your request. Please try again.',
                            'error'
                        );
                    });
                }
            });
        }

        // Initialize tooltips
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize any tooltips if needed
            const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
            tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
            });
        });
    </script>
    
    <script>
        // Function to format dates
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return new Date(dateString).toLocaleDateString(undefined, options);
        }
        
        // Function to handle request cancellation
        function cancelRequest(requestId) {
            Swal.fire({
                title: 'Are you sure?',
                text: "You won't be able to revert this!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#EF4444',
                cancelButtonColor: '#6B7280',
                confirmButtonText: 'Yes, cancel it!',
                cancelButtonText: 'No, keep it',
                customClass: {
                    popup: 'border border-gray-200',
                    title: 'text-2xl font-bold text-gray-800',
                    confirmButton: 'px-6 py-2 rounded-lg',
                    cancelButton: 'px-6 py-2 rounded-lg bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 mr-2',
                },
                buttonsStyling: false
            }).then((result) => {
                if (result.isConfirmed) {
                    // In a real app, you would make an API call here
                    console.log('Cancelling request:', requestId);
                    
                    Swal.fire(
                        'Cancelled!',
                        'Your blood request has been cancelled.',
                        'success'
                    );
                }
            });
        }
        
        // Initialize tooltips
        document.addEventListener('DOMContentLoaded', function() {
            // Format all dates on the page
            document.querySelectorAll('time[datetime]').forEach(timeEl => {
                const dateString = timeEl.getAttribute('datetime');
                if (dateString) {
                    timeEl.textContent = formatDate(dateString);
                }
            });
            
            // Add any other initialization code here
        });
    </script>
</body>
</html>
